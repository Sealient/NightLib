local MyUI = {}

-- Main UI Components
function MyUI:CreateUI()
    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Name = "MyHackUI"
    ScreenGui.Parent = game:GetService("CoreGui")
    
    local MainFrame = Instance.new("Frame", ScreenGui)
    MainFrame.Name = "MainFrame"
    MainFrame.Size = UDim2.new(0, 500, 0, 300)
    MainFrame.Position = UDim2.new(0.5, -250, 0.5, -150)
    MainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
    
    local UIGradient = Instance.new("UIGradient", MainFrame)
    UIGradient.Color = ColorSequence.new(Color3.fromRGB(45, 45, 45), Color3.fromRGB(25, 25, 25))
    
    -- Enable Dragging
    local dragging
    local dragInput
    local dragStart
    local startPos

    MainFrame.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            dragStart = input.Position
            startPos = MainFrame.Position
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)

    MainFrame.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement then
            dragInput = input
        end
    end)

    game:GetService("UserInputService").InputChanged:Connect(function(input)
        if input == dragInput and dragging then
            local delta = input.Position - dragStart
            MainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end
    end)

    -- Tabs Container
    local TabsFrame = Instance.new("Frame", MainFrame)
    TabsFrame.Name = "TabsFrame"
    TabsFrame.Size = UDim2.new(0, 100, 1, 0)
    TabsFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)

    local ContentBackgroundFrame = Instance.new("Frame", MainFrame)
    ContentBackgroundFrame.Name = "ContentBackgroundFrame"
    ContentBackgroundFrame.Position = UDim2.new(0, 100, 0, 0)
    ContentBackgroundFrame.Size = UDim2.new(1, -100, 1, 0)
    ContentBackgroundFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)

    self.MainFrame = MainFrame
    self.TabsFrame = TabsFrame
    self.ContentFrame = ContentBackgroundFrame
    self.Tabs = {}

    return self
end

-- Add a Tab
function MyUI:CreateTab(name)
    local Button = Instance.new("TextButton", self.TabsFrame)
    Button.Size = UDim2.new(1, 0, 0, 50)
    Button.Text = name
    Button.BackgroundColor3 = Color3.fromRGB(30, 30, 30)

    local ContentFrame = Instance.new("Frame", self.ContentFrame)
    ContentFrame.Size = UDim2.new(1, 0, 1, 0)
    ContentFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    ContentFrame.Visible = false

    Button.MouseButton1Click:Connect(function()
        for _, tab in pairs(self.Tabs) do
            tab.ContentFrame.Visible = false
        end
        ContentFrame.Visible = true
    end)

    table.insert(self.Tabs, { Button = Button, ContentFrame = ContentFrame })

    return {
        CreateSection = function(sectionName)
            local Section = Instance.new("Frame", ContentFrame)
            Section.Size = UDim2.new(1, 0, 0, 100)
            Section.BackgroundColor3 = Color3.fromRGB(45, 45, 45)

            local SectionTitle = Instance.new("TextLabel", Section)
            SectionTitle.Text = sectionName
            SectionTitle.Size = UDim2.new(1, 0, 0, 20)

            return {
                CreateToggle = function(toggleName, defaultState, callback)
                    local ToggleButton = Instance.new("TextButton", Section)
                    ToggleButton.Size = UDim2.new(0, 100, 0, 30)
                    ToggleButton.Text = toggleName
                    ToggleButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
                    ToggleButton.MouseButton1Click:Connect(function()
                        defaultState = not defaultState
                        callback(defaultState)
                    end)
                end
            }
        end
    }
end

return MyUI
